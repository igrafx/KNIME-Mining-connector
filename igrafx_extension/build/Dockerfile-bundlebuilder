FROM datajoint/miniconda3

VOLUME /extension

VOLUME /release

USER root

RUN conda create -n knime-ext-bundling -c knime -c conda-forge knime-extension-bundling

RUN echo -e "\nconda activate knime-ext-bundling" >> ~/.bashrc

SHELL ["/bin/bash", "--login", "-c"]

RUN conda update conda

ARG VERSION="5.1"

# The code to run when container is started:
ENTRYPOINT ["build_python_extension.py", "/extension/igrafx_knime_extension", "/release/$VERSION"]

